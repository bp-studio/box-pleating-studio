/**
 * shrewd v0.0.11
 * (c) 2019-2021 Mu-Tsun Tsai
 * Released under the MIT License.
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Shrewd=e()}(this,(function(){"use strict";var t;!function(t){t.array=function(t,e){if(!t!=!e)return!1;if(t==e)return!0;if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0},t.unorderedArray=function(t,e){if(!t!=!e)return!1;if(t==e)return!0;if(t.length!=e.length)return!1;for(let s of t)if(!e.includes(s))return!1;return!0}}(t||(t={}));class e{constructor(){this.t=new Set,this.s=e.i++}static h(t){return!(!O.o&&t.l)||(O.u&&!O.$(t)?(console.warn("Inside a renderer function, only the objects owned by the ObservableProperty can be written."),r.p.debug,!1):!(!O.u&&O.g)||(console.warn("Writing into Observables is not allowed inside a ComputedProperty or a ReactiveMethod. For self-correcting behavior, use the renderer option of the ObservableProperty."),r.p.debug,!1))}static m(t){r.p.hook.write(t.s);for(let e of t.t)r.p.debug?e.v(t):e.v()}_(t){this.t.add(t)}S(t){this.t.delete(t)}get l(){return this.t.size>0}get j(){return this.t.values()}}e.i=0;class s{read(t){return!1}write(t){}gc(){return[]}sub(t){return!1}}class i{constructor(t){if(this.k=new Set,this.C=t||"undefined"!=typeof window&&window.Vue,!this.C)throw new Error("Global Vue not found; you need to pass a Vue constructor to VueHook.");this.O=new this.C({data:{shrewd:{}}})}read(t){let e=this.O.shrewd[t];return e&&e.__ob__.dep.subs.length>0}write(t){r.p.autoCommit?this.C.set(this.O.shrewd,t,{}):this.k.add(t)}precommit(){for(let t of this.k)this.C.set(this.O.shrewd,t,{});this.k.clear()}gc(){let t=[];for(let e in this.O.shrewd)0==this.O.shrewd[e].__ob__.dep.subs.length&&(this.C.delete(this.O.shrewd,e),t.push(Number(e)));return t}sub(t){return t in this.O.shrewd&&this.O.shrewd[t].__ob__.dep.subs.length>0}}class r{static R(){r.p.hook.precommit&&r.p.hook.precommit(),O.P({g:!0});try{for(let t of r.A)u.G(t,!0)}finally{u.M(),r.A.clear(),O.D();for(let t of r.T)t.q();r.T.clear(),r.p.debug&&u.V(),r.W()}r.p.hook.postcommit&&r.p.hook.postcommit()}static W(){for(let t of r.H)u.F(t);r.H.clear();for(let t of r.p.hook.gc()){let e=u.I.get(t);e&&u.F(e)}r.K.clear()}static N(t){t instanceof u&&r.H.add(t)}static B(t){r.J.add(t)}static L(){if(!r.U){r.U=!0;for(let t of r.J)r.J.delete(t),t.X();r.U=!1}}static X(t){if(t[h]){if(!r.U){r.U=!0;for(let e of t[h].Y())r.J.delete(e),e.X();r.U=!1}}else n.Z.add(t)}static tt(){r.R(),r.et=!1}static st(t){r.A.delete(t)}static it(t){t.rt||r.A.add(t),r.p.autoCommit&&!r.et&&(Promise.resolve().then(r.tt),r.et=!0)}static q(t,e=!1){if(c.nt(t,h)){let s=t[h];e?r.T.add(s):s.q()}}}r.p={hook:new s,autoCommit:!0,debug:!1},r.A=new Set,r.T=new Set,r.J=new Set,r.H=new Set,r.K=new Set,r.et=!1,r.U=!1;class n{static get(t){if(c.nt(t,R))return t[R];{let e=[];return c.ht(t,R,e),e}}static ot(t,e,s,i){if(void 0===e)return"function"==typeof t?n.ct(t):(e,s,i)=>n.ot(e,s,i,t);if("string"==typeof e){let r=s||Object.getOwnPropertyDescriptor(t,e);if(!r)return n.lt(k,t,e,void 0,i);if(r.get&&!r.set)return n.lt(x,t,e,r,i);if("function"==typeof r.value)return n.lt(C,t,e,r,i)}console.warn(`Setup error at ${t.constructor.name}[${e.toString()}]. Decorated member must be one of the following: a field, a readonly get accessor, or a method.`),r.p.debug}static ct(t){var e=new Proxy(t,n.at);return n.ut.add(e),e}static lt(t,e,s,i,r){var h=new t(e,s,i,r);return n.get(e).push(h.ft),h.dt()}}n.ut=new WeakSet,n.at={construct(t,e,s){n.ut.has(s)||console.warn(`Class [${s.name}] is derived form @shrewd class [${t.name}], but it is not decorated with @shrewd.`),O.P({o:!0,g:!1,$t:null}),u.pt.push("construct "+t.name);try{let i=Reflect.construct(t,e,s);return i.constructor==t&&new o(i),n.Z.has(i)&&(n.Z.delete(i),r.X(i)),i}finally{u.pt.pop(),O.D()}}},n.Z=new Set;const h=Symbol("ShrewdObject");class o{constructor(t){this.gt=!1,this.bt=new Map,this.wt=c.ht(t,h,this);let e=Object.getPrototypeOf(this.wt);for(;e;){if(c.nt(e,R)){let t=e[R];for(let e of t){let t=new e.yt(this.wt,e);this.bt.has(t.vt)?t.q():this.bt.set(t.vt,t)}}e=Object.getPrototypeOf(e)}for(let t of this.bt.values())r.B(t)}q(){if(!this.gt){for(let t of this.bt.values())t.q();this.gt=!0}}Y(t){return t?this.bt.get(t):this.bt.values()}get _t(){let t=[];for(let e of this.bt.values())e instanceof m&&t.push(e);return t}}class c{static nt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}static ht(t,e,s){return Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!1,value:s}),t}}class l{get(t,e,s){let i=t[f],r=Reflect.get(t,e);return"function"==typeof r&&(r=this.St.bind({jt:e,$t:t,xt:r.bind(t),kt:i,Ct:s})),"size"==e&&u.Ot(t[f]),r}St(...t){switch(this.jt){case"clear":return void(u.h(this.kt)&&this.$t.size>0&&(this.$t.clear(),e.m(this.kt)));case"delete":return void(u.h(this.kt)&&this.$t.has(t[0])&&(this.$t.delete(t[0]),e.m(this.kt)));case Symbol.iterator:case"entries":case"forEach":case"has":case"keys":case"values":u.Ot(this.kt);default:return this.xt(...t)}}}var a;!function(t){t[t.Rt=0]="$outdated",t[t.Pt=1]="$updated",t[t.At=2]="$pending"}(a||(a={}));class u extends e{constructor(t){super(),this.Gt=new Set,this.Mt=!1,this.zt=a.Rt,this.gt=!1,this.trigger=new Set,u.I.set(this.s,this),this.Dt=t}static M(){for(let t of u.Tt)t.zt==a.At&&t.qt&&(t.Vt(),u.Tt.delete(t))}static V(){for(let t of u.Wt)t.trigger.clear();u.Wt.clear()}static Et(t){let e=[t.Dt];for(;t.trigger.size;){let s=t.trigger.values().next().value;if(!(s instanceof u))break;let i=s.Dt;s instanceof $&&(i+="("+$.Ht(s)+")"),e.push(i),t=s}console.log(e)}static Ot(t){if(t instanceof u&&t.gt)return;r.p.hook.read(t.s)&&t instanceof u&&t.Ft();let e=O.$t;e&&e!=t&&!e.gt&&e.Gt.add(t)}static F(t){if(!r.K.has(t)&&(r.K.add(t),!t.gt&&!(t.It=t.Kt())))for(let e of t.Gt)e instanceof u&&u.F(e)}static G(t,e=!1){if(!e||(t.Nt(),!t.gt)){O.P({o:!1,$t:t}),t.Mt=!0,r.st(t);try{let e=new Set(t.Gt);t.Bt(),t.Jt();try{let e=t.Lt();t.Qt(e)}finally{t.Ut()}if(t.Vt(),!t.gt)for(let s of t.Gt)e.delete(s),s._(t),t.qt&&s instanceof u&&s.Ft();for(let t of e)r.N(t)}finally{t.Mt=!1,O.D()}}}get rt(){return this.Mt}v(t){this.Xt(),this.Yt(t),this.qt&&r.it(this)}q(){this.gt||(r.st(this),u.I.delete(this.s),u.Tt.delete(this),this.gt=!0,this.Zt())}Zt(){this.Bt();for(let t of this.j)t.Gt.delete(this),this.S(t);this.Vt(),this.Mt=!1}Xt(){if(this.zt==a.Pt){this.zt=a.At,u.Tt.add(this);for(let t of this.j)t.Xt()}}te(){if(this.Mt&&this.ee(),this.zt!=a.Pt){u.pt.push(this);try{this.Nt(),this.zt==a.Rt?u.G(this):(u.Tt.delete(this),this.Vt())}finally{u.pt.pop()}}}Nt(){for(let t of this.Gt)if(t instanceof u){if(t.Mt){u.G(this);break}t.zt!=a.Pt&&t.te()}}ee(){r.p.debug;let t=u.pt.indexOf(this),e=[this,...u.pt.slice(t+1)];e.forEach(t=>t instanceof u&&t.q()),e.push(this);let s=e.map(t=>"string"==typeof t?t:t.Dt).join(" => ");console.warn("Cyclic dependency detected: "+s+"\nAll these reactions will be terminated.")}Vt(){this.zt=a.Pt}Yt(t){t&&(u.Wt.add(this),this.trigger.add(t)),this.zt=a.Rt}get se(){return this.zt}get qt(){return this.It=null!=this.It?this.It:this.Kt()}Kt(){if(r.p.hook.sub(this.s))return!0;for(let t of this.j)if(t.qt)return!0;return!1}Ft(){if(!this.qt){this.It=!0;for(let t of this.Gt)t instanceof u&&t.Ft()}}Jt(){}Qt(t){}Ut(){}Bt(){for(let t of this.Gt)t.S(this);this.Gt.clear()}get ie(){return this.Gt.size>0}get re(){return this.gt}}u.Tt=new Set,u.Wt=new Set,u.I=new Map,u.pt=[];const f=Symbol("Observable Helper");class d extends e{constructor(t,e){super(),this.ne=c.ht(t,f,this),this.he=new Proxy(t,e),d.oe.set(t,this.he)}static ce(t){if(null==t||"object"!=typeof t)return t;if(d.oe.has(t))return d.oe.get(t);if(!d.le(t))switch(Object.getPrototypeOf(t)){case Array.prototype:t=new _(t).ae;break;case Set.prototype:t=new b(t).ae;break;case Map.prototype:t=new w(t).ae;break;case Object.prototype:t=new g(t).ae}return t}static ue(t){d.le(t)&&(t=t[f].ne),d.oe.has(t)&&d.oe.delete(t)}static le(t){return null!=t&&"object"==typeof t&&c.nt(t,f)}get ae(){return this.he}}d.oe=new WeakMap;class $ extends u{constructor(t,e){super(e.fe+"."+e.de.toString()),this.$e=e,this.pe=Object.assign(this.ge,e.p),this.wt=t}static Ht(t){return t.wt.constructor.name}get vt(){return this.$e.fe+"."+this.$e.de.toString()}X(){this.te()}get ge(){return{}}Kt(){return!!this.pe.active||super.Kt()}be(){return this.re?this.we():(u.Ot(this),this.ye())}}class p{has(t,e){return u.Ot(t[f]),Reflect.has(t,e)}get(t,e,s){return u.Ot(t[f]),Reflect.get(t,e,s)}set(t,s,i,r){let n=t[f];if(e.h(n)){return i!==Reflect.get(t,s,r)&&(Reflect.set(t,s,d.ce(i),r),e.m(n)),!0}return!0}deleteProperty(t,s){let i=t[f];if(e.h(i)){let r=Reflect.deleteProperty(t,s);return r&&e.m(i),r}return!0}}class g extends d{constructor(t){for(let e in t)t[e]=d.ce(t[e]);super(t,g.me)}get ve(){let t=[];for(let e in this.ne){let s=this.ne[e];"object"==typeof s&&t.push(s)}return t}}g.me=new p;class b extends d{constructor(t){for(let e of t)t.delete(e),t.add(d.ce(e));super(t,b.me)}get ve(){let t=[];for(let e of this.ne)"object"==typeof e&&t.push(e);return t}}b.me=new class extends l{St(...t){return"add"==this.jt?(u.h(this.kt)&&!this.$t.has(t[0])&&(this.$t.add(d.ce(t[0])),e.m(this.kt)),this.Ct):super.St.apply(this,t)}};class w extends d{constructor(t){for(let[e,s]of t)t.set(e,d.ce(s));super(t,w.me)}get ve(){let t=[];for(let[e,s]of this.ne)"object"==typeof e&&t.push(e),"object"==typeof s&&t.push(s);return t}}w.me=new class extends l{St(...t){return"set"==this.jt?(u.h(this.kt)&&!this.$t.has(t[0])&&(this.$t.set(t[0],d.ce(t[1])),e.m(this.kt)),this.Ct):super.St.apply(this,t)}};class y extends ${constructor(t,e){var s,i;super(t,e),this._e=e.xt,this.pe.active&&this.v(),null!==(s=(i=this.pe).comparer)&&void 0!==s||(i.comparer=(t,e)=>t===e)}get Lt(){return this._e.bind(this.wt)}Qt(t){this.pe.comparer.apply(this.wt,[this.Se,t,this])||(this.Se=t,e.m(this)),this.ie||this.q()}ye(){return this.te(),this.ie||this.q(),this.Se}we(){return this.Se}Zt(){d.ue(this.Se),super.Zt()}}class m extends ${constructor(t,e){super(t,e),this.je=!1,this.xe=this.ke=t[e.de],Object.defineProperty(t,e.de,m.Ce(e.de)),this.pe.renderer||this.Vt()}static Ce(t){return m.Oe[t]=m.Oe[t]||{get(){return this[h].Y(t).be()},set(e){this[h].Y(t).Re(e)}}}static Pe(t){if(null!=t&&"object"==typeof t)if(d.le(t)){if(!O.$(t[f])){O.Pe(t[f]);for(let e of t[f].ve)m.Pe(e)}}else if(c.nt(t,h))for(let e of t[h]._t)O.$(e)||(O.Pe(e),m.Pe(e.xe))}get vt(){return this.$e.de.toString()}X(){this.je||(this.Ae(),this.pe.renderer?this.te():this.xe=this.ke,this.je=!0)}Yt(t){this.pe.renderer&&super.Yt(t)}Ae(){var t,e;null===(e=null===(t=this.pe.validator)||void 0===t?void 0:t.apply(this.wt,[this.ke]))||void 0===e||e||(this.ke=void 0),this.ke=d.ce(this.ke)}ye(){return this.je?(this.pe.renderer&&this.te(),this.xe):(this.Ae(),this.ke)}we(){return this.xe}Re(t){var s,i;if(this.re)this.xe=t;else if(e.h(this)&&t!==this.ke){if(null!==(i=null===(s=this.pe.validator)||void 0===s?void 0:s.apply(this.wt,[t]))&&void 0!==i&&!i)return r.p.hook.write(this.s);if(this.ke=d.ce(t),this.pe.renderer){this.Jt();try{this.Qt(this.Lt())}finally{this.Ut()}}else this.m(this.ke)}}Jt(){O.P({u:!0,Ge:new Set}),m.Pe(this.ke)}get Lt(){return this.pe.renderer.bind(this.wt,this.ke)}Qt(t){t!==this.xe&&this.m(d.ce(t))}Ut(){O.D()}m(t){this.xe=t,e.m(this)}Zt(){d.ue(this.ke),d.ue(this.xe),delete this.ke,delete this.pe,super.Zt()}}m.Oe={};class v extends ${constructor(t,e){super(t,e),this.St=e.xt}get ge(){return{active:!0}}get Lt(){return this.St.bind(this.wt)}ye(){return()=>(this.te(),this.Me)}we(){return()=>this.Me}Qt(t){this.Me=t,e.m(this)}Zt(){d.ue(this.Me),super.Zt()}}class _ extends d{constructor(t){for(let e in t)t[e]=d.ce(t[e]);super(t,_.me)}get ve(){let t=[];for(let e of this.ne)"object"==typeof e&&t.push(e);return this.ne}}var S;_.me=new class extends p{get(t,e,s){return("length"==e||"symbol"==typeof e||"number"==typeof e||"string"==typeof e&&e.match(/^\d+$/))&&u.Ot(t[f]),Reflect.get(t,e,s)}},function(e){e.shrewd=n.ot,e.symbol=h,e.commit=r.R,e.terminate=r.q,e.initialize=r.X,e.hook={default:s,vue:i},e.option=r.p,e.comparer=t,e.debug={trigger(t,e){if(c.nt(t,h)){let s=t[h].Y(e);s?u.Et(s):console.log("Member not found")}else t instanceof u&&u.Et(t)}}}(S||(S={})),"undefined"!=typeof window&&window.Vue&&(r.p.hook=new i);class j{constructor(t,e,s,i){this.ze=t,this.De=e,this.$e=s,this.Te=i}get Dt(){return this.ze.constructor.name+"."+this.De.toString()}get ft(){return{de:this.De.toString(),fe:this.ze.constructor.name,yt:this.qe,xt:this.St,p:this.Te}}get St(){}dt(){}}class x extends j{get qe(){return y}get St(){return this.$e.get}dt(){let t=this.Dt,e=this.St;return this.$e.get=function(){if(c.nt(this,h)){return this[h].Y(t).be()}return e.apply(this)},this.$e}}class k extends j{get qe(){return m}}class C extends j{get qe(){return v}get St(){return this.$e.value}dt(){let t=this.Dt,e=this.St;return delete this.$e.value,delete this.$e.writable,this.$e.get=function(){if(c.nt(this,h)){return this[h].Y(t).be()}return e.bind(this)},this.$e}}class O{static P(t){O.Ve.push(O.zt),O.zt=Object.assign({},O.zt,t)}static D(){O.zt=O.Ve.pop(),0==O.Ve.length&&r.L()}static get g(){return O.zt.g}static get o(){return O.zt.o}static get u(){return O.zt.u}static get $t(){return O.zt.$t}static $(t){return O.zt.Ge.has(t)}static Pe(t){O.zt.Ge.add(t)}}O.zt={g:!1,o:!1,u:!1,$t:null,Ge:new Set},O.Ve=[];const R=Symbol("Shrewd Decorators");return S}));
